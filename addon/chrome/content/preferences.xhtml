<linkset>
  <html:link rel="localization" href="__addonRef__-preferences.ftl" />
</linkset>
<commandset id="mainCommandSet">
  <command
    id="cmd_setEnableEncrypt"
    oncommand="Zotero.__addonInstance__.hooks.onCommand('cmd_setEnableEncrypt')"
  />
  <command
    id="cmd_editRSAfileName"
    oncommand="Zotero.__addonInstance__.hooks.onCommand('cmd_editRSAfileName')"
  />
  <command
    id="cmd_openCryptoDirectory"
    oncommand="Zotero.__addonInstance__.hooks.onCommand('cmd_openCryptoDirectory')"
  />
  <command
    id="cmd_selectRSADirectory"
    oncommand="Zotero.__addonInstance__.hooks.onCommand('cmd_selectRSADirectory')"
  />
</commandset>

<vbox
  id="zotero-prefpane-__addonRef__"
  onload="Zotero.__addonInstance__.hooks.onPrefsEvent('load', {window})"
>
  <label>
    <html:h3 data-l10n-id="pref-descript"></html:h3>
  </label>
</vbox>

<vbox>
  <groupbox id="menuLocation">
    <label>
      <html:h3 data-l10n-id="pref-addonMenuLocation"></html:h3>
    </label>

    <radiogroup
      id="__addonRef__-addonMenuLocation"
      preference="extensions.zotero.__addonRef__.addonMenuLocation"
    >
      <hbox>
        <radio
          data-l10n-id="pref-rightMenuLocation"
          value="right"
          selected="true"
        />
        <radio
          data-l10n-id="pref-leftMenuLocation"
          value="left"
          selected="false"
        />
      </hbox>
    </radiogroup>
  </groupbox>
</vbox>

<separator class="groove" />
<vbox>
  <groupbox>
    <label>
      <!-- style="text-align: center" -->
      <html:h3 data-l10n-id="pref-translateSetting"></html:h3>
    </label>

    <!-- 原文和目标语言设置 -->
    <hbox>
      <label data-l10n-id="pref-sourceLang"></label>
      <box id="__addonRef__-sourceLang-placeholder"></box>

      <splitter />

      <label data-l10n-id="pref-targetLang"></label>
      <box id="__addonRef__-targetLang-placeholder"></box>
    </hbox>
  </groupbox>
  <!-- 屏蔽翻译 -->
  <groupbox>
    <vbox>
      <hbox>
        <label
          style="font-weight: bold"
          data-l10n-id="pref-untranslatedLanguage"
        ></label>

        <checkbox id="__addonRef__-selectAll" data-l10n-id="pref-selectAll" />
        <checkbox
          id="__addonRef__-isSkipLocal"
          checked="true"
          data-l10n-id="pref-isSkipLocal"
        />
      </hbox>

      <box id="__addonRef__-skipLanguages-placeholder"></box>
      <spacer width="20px" height="20px" />
      <label data-l10n-id="pref-descript-untranslatedLanguage"></label>
    </vbox>
  </groupbox>

  <!-- 双语设置 -->
  <groupbox>
    <spacer width="20px" height="20px" />
    <hbox>
      <!-- <caption style="font-weight: bold" data-l10n-id="pref-bilingualSetting" /> -->
      <label data-l10n-id="pref-bilingualSetting"></label>
      <splitter />
      <checkbox
        id="__addonRef__-bilingualContrast"
        preference="extensions.zotero.__addonRef__.bilingualContrast"
        data-l10n-id="pref-bilingualContrast"
      />
      <splitter />
      <radiogroup
        id="__addonRef__-sourceTargetOrder"
        preference="extensions.zotero.__addonRef__.sourceTargetOrder"
      >
        <hbox>
          <radio
            id="__addonRef__-isSourceFirst"
            data-l10n-id="pref-isSourceFirst"
          />
          <radio
            id="__addonRef__-isTargetFirst"
            data-l10n-id="pref-isTargetFirst"
          />
        </hbox>
      </radiogroup>
    </hbox>
  </groupbox>

  <!-- 标题前内容处理方式 -->
  <groupbox>
    <spacer width="20px" height="20px" />
    <!-- <caption
      style="font-weight: bold"
      data-l10n-id="pref-handleContentBeforeTitle"
    /> -->
    <label
      style="font-weight: bold"
      data-l10n-id="pref-handleContentBeforeTitle"
    ></label>
    <radiogroup
      id="__addonRef__-handleContentBeforeTitle"
      preference="extensions.zotero.__addonRef__.handleContentBeforeTitle"
    >
      <hbox>
        <radio
          data-l10n-id="pref-moveToArticleEnd"
          value="moveToArticleEnd"
          selected="true"
        />
        <radio
          data-l10n-id="pref-moveToPageEnd"
          value="moveToPageEnd"
          selected="false"
        />
        <radio
          data-l10n-id="pref-moveAfterTitle"
          value="moveAfterTitle"
          selected="false"
        />
        <radio data-l10n-id="pref-deleteIt" value="deleteIt" selected="false" />
        <radio
          data-l10n-id="pref-nothingToDo"
          value="nothingToDo"
          selected="false"
        />
      </hbox>
    </radiogroup>
  </groupbox>

  <!-- 翻译引擎选择方式 -->
  <groupbox>
    <spacer width="20px" height="20px" />
    <label
      style="font-weight: bold"
      data-l10n-id="pref-serviceSelectMode"
    ></label>
    <checkbox
      id="__addonRef__-isPay"
      preference="extensions.zotero.__addonRef__.isPay"
      data-l10n-id="pref-isPay"
    />
    <checkbox
      id="__addonRef__-isPreferredSameService"
      preference="extensions.zotero.__addonRef__.isPreferredSameService"
      data-l10n-id="pref-isPreferredSameService"
    />
    <checkbox
      id="__addonRef__-isPreferredHasSecretKey"
      preference="extensions.zotero.__addonRef__.isPreferredHasSecretKey"
      data-l10n-id="pref-isPreferredHasSecretKey"
    />
    <checkbox
      id="__addonRef__-isPriority"
      preference="extensions.zotero.__addonRef__.isPriority"
      data-l10n-id="pref-isPriority"
    />
  </groupbox>
</vbox>

<!-- 安全设置 加密保护账户秘钥和 token -->
<separator class="groove" />
<vbox>
  <label>
    <html:h3 data-l10n-id="pref-cryProtect"></html:h3>
  </label>

  <checkbox
    id="__addonRef__-setEnableEncrypt"
    native="true"
    checked="false"
    data-l10n-id="pref-enableEncrypt"
    command="cmd_setEnableEncrypt"
    tooltip="setEnableEncryptTip"
  />
  <tooltip id="setEnableEncryptTip" orient="vertical">
    <label data-l10n-id="pref-setEnableEncryptTip" />
  </tooltip>

  <hbox>
    <label
      id="__addonRef__-cryptoProtectRun"
      data-l10n-id="pref-cryptoProtectRun"
      hidden="true"
    />
    <button
      id="__addonRef__-openCryptoDirectory"
      data-l10n-id="pref-openCryptoDirectory"
      command="cmd_openCryptoDirectory"
      hidden="true"
    ></button>
    <button
      id="__addonRef__-selectRSADirectory"
      data-l10n-id="pref-selectRSADirectory"
      command="cmd_selectRSADirectory"
      hidden="true"
    ></button>
  </hbox>
  <hbox>
    <button
      id="__addonRef__-updateCryptoKey"
      data-l10n-id="pref-updateCryptoKey"
      hidden="true"
      tooltip="updateCryptoKeyTip"
    ></button>
    <tooltip id="updateCryptoKeyTip" orient="vertical">
      <label data-l10n-id="pref-updateCryptoKey1" />
      <label data-l10n-id="pref-updateCryptoKey2" />
      <label data-l10n-id="pref-updateCryptoKey3" />
    </tooltip>
    <button
      id="__addonRef__-addOldCryKey"
      data-l10n-id="pref-addOldCryKey"
      hidden="true"
      tooltip="addOldCryKeyTip"
    ></button>
    <tooltip id="addOldCryKeyTip" orient="vertical">
      <label data-l10n-id="pref-addOldCryKey1" />
      <label data-l10n-id="pref-addOldCryKey2" />
    </tooltip>
    <button
      id="__addonRef__-editRSAfileName"
      data-l10n-id="pref-editRSAfileName"
      command="cmd_editRSAfileName"
      hidden="true"
      tooltip="editRSAfileNameTip"
    ></button>
    <tooltip id="editRSAfileNameTip" orient="vertical">
      <label data-l10n-id="pref-editRSAfileNameTip" />
    </tooltip>

    <spacer width="20px" height="20px" />
  </hbox>

  <hbox>
    <checkbox
      id="__addonRef__-deleteSourceFile"
      native="true"
      checked="false"
      data-l10n-id="pref-deleteSourceFile"
      hidden="true"
      tooltip="deleteSourceFileTip"
    />
    <tooltip id="deleteSourceFileTip" orient="vertical">
      <label data-l10n-id="pref-deleteSourceFileTip" />
    </tooltip>
  </hbox>
</vbox>

<!--多账户管理-->
<separator class="groove" />
<vbox>
  <label>
    <html:h3 data-l10n-id="pref-multi-account-manage"></html:h3>
  </label>

  <hbox>
    <label data-l10n-id="pref-underUse"></label>
    <spacer width="10px" />
    <textbox id="__addonRef__-serviceIDUnderUse" readonly="true" />
    <spacer width="10px" />
    <textbox id="__addonRef__-secretKeyUnderUse" readonly="true" />
  </hbox>
  <separator class="groove" />

  <hbox>
    <label data-l10n-id="pref-multi-service"></label>
    <!-- Replace -->
    <box id="__addonRef__-serviceID-placeholder"></box>
    <button
      id="__addonRef__-switchService"
      data-l10n-id="pref-switchService"
    ></button>
    <button
      id="__addonRef__-forbiddenService"
      data-l10n-id="pref-forbiddenService"
    ></button>
    <button
      id="__addonRef__-saveLimitParam"
      data-l10n-id="pref-saveLimitParam"
    ></button>
  </hbox>
  <hbox>
    <spacer width="20px" height="20px" />
    <label data-l10n-id="pref-QPS"></label>
    <html:input
      size="10"
      value=""
      type="text"
      id="__addonRef__-QPS"
    ></html:input>

    <label data-l10n-id="pref-charasPerTime"></label>
    <html:input
      size="10"
      type="text"
      value=""
      id="__addonRef__-charasPerTime"
    ></html:input>
    <checkbox
      id="__addonRef__-hasSecretKey"
      native="true"
      data-l10n-id="pref-hasSecretKey"
    />
  </hbox>
  <hbox>
    <checkbox
      id="__addonRef__-supportMultiParas"
      native="true"
      data-l10n-id="pref-supportMultiParas"
    />
    <label data-l10n-id="pref-limitMode"></label>
    <!-- Replace -->
    <box id="__addonRef__-limitMode-placeholder"></box>

    <label data-l10n-id="pref-charasLimit"></label>
    <html:input
      size="10"
      type="text"
      id="__addonRef__-charasLimit"
    ></html:input>
    <label data-l10n-id="pref-charasLimitFactor"></label>
    <html:input
      size="5"
      type="text"
      id="__addonRef__-charasLimitFactor"
      preference="extensions.zotero.__addonRef__.charasLimitFactor"
    ></html:input>
  </hbox>
  <separator class="groove" />

  <vbox>
    <spacer width="20px" height="20px" />
    <hbox>
      <button
        id="__addonRef__-addRecord"
        data-l10n-id="pref-addRecord"
        tooltip="addRecordtip"
      ></button>
      <tooltip id="addRecordtip" orient="vertical">
        <label data-l10n-id="pref-secretKey-help" />
        <label data-l10n-id="pref-secretKey-help1" />
        <label data-l10n-id="pref-secretKey-help2" />
      </tooltip>
      <button
        id="__addonRef__-addRecordBulk"
        data-l10n-id="pref-addRecordBulk"
        tooltip="addRecordBulktip"
      ></button>
      <tooltip id="addRecordBulktip" orient="vertical">
        <label data-l10n-id="pref-importSecretKeysFromFile" />
        <label data-l10n-id="pref-importSecretKeysFromClipboard" />
        <label data-l10n-id="pref-addRecordBulkTooltip" />
        <label value="e.g.:" />
        <label value="baidu" />
        <label value="200000000000#jjjjjjjjjj" />
        <label value="200000000000#jjjjjjjjjj;1,10" />
      </tooltip>
    </hbox>
  </vbox>
  <!-- 秘钥表格 -->
  <html:div id="__addonRef__-table-container" />
  <vbox>
    <separator class="groove" />
    <!-- 测试表格 -->
    <html:div id="my-table-container" />
  </vbox>

  <!-- 优先级 -->
  <vbox>
    <hbox align="center">
      <button
        id="__addonRef__-recoverService"
        data-l10n-id="pref-recoverService"
      ></button>
    </hbox>
    <hbox>
      <vbox flex="1">
        <label
          data-l10n-id="pref-servicePriorityWithKey"
          minWidth="350px"
          id="__addonRef__-labelPriorityWithKey"
        ></label>

        <html:div id="__addonRef__-table-servicePriorityWithKey" />
      </vbox>
      <separator class="groove" orient="vertical" />
      <vbox flex="1">
        <label
          data-l10n-id="pref-servicePriorityWithoutKey"
          minWidth="350px"
          id="__addonRef__-labelPriorityWithoutKey"
        ></label>

        <html:div id="__addonRef__-table-servicePriorityWithoutKey" />
      </vbox>
    </hbox>
    <separator class="groove" />
    <description data-l10n-id="pref-Priority-help" />
  </vbox>
</vbox>

<!--LLM 设置-->
<separator class="groove" />
<vbox>
  <label>
    <html:h3 data-l10n-id="pref-LLM-settings"></html:h3>
  </label>

  <hbox>
    <label
      control="__addonRef__-providers"
      data-l10n-id="pref-LLM-provider"
    ></label>
    <!-- Replace -->
    <box id="__addonRef__-LLMProvider-placeholder"></box>
    <spacer width="20px" height="20px" />

    <label
      control="__addonRef__-providerCustom"
      data-l10n-id="pref-providerCustom"
    ></label>
    <html:input
      size="20"
      value=""
      type="text"
      id="__addonRef__-providerCustom"
    ></html:input>
  </hbox>
  <hbox>
    <!-- 接口代理地址 -->
    <label control="__addonRef__-baseurl" data-l10n-id="pref-baseURL"></label>
    <html:input
      size="60"
      value=""
      type="text"
      id="__addonRef__-baseurl"
    ></html:input>
  </hbox>
  <hbox>
    <!-- 模型列表 -->
    <label control="__addonRef__-models" data-l10n-id="pref-modelsList"></label>
    <html:input
      size="60"
      value=""
      type="text"
      id="__addonRef__-models"
    ></html:input>
  </hbox>
  <hbox>
    <!-- 默认模型 -->
    <label
      control="__addonRef__-defaultModel"
      data-l10n-id="pref-defaultModel"
    ></label>
    <html:input
      size="60"
      value=""
      type="text"
      id="__addonRef__-defaultModel"
    ></html:input>
  </hbox>
  <hbox>
    <!-- API Key -->
    <label control="__addonRef__-apikey">API Key</label>
    <html:input
      size="60"
      value=""
      type="text"
      id="__addonRef__-apikey"
    ></html:input>
  </hbox>

  <hbox>
    <button
      id="__addonRef__-connectivityCheck"
      data-l10n-id="pref-connectivityCheck"
      width="5rem"
    ></button>
  </hbox>
</vbox>
<!--看图-->
<vbox>
  <separator class="groove" />
  <label>
    <html:h3 data-l10n-id="pref-imageViewer"></html:h3>
  </label>
  <groupbox>
    <caption data-l10n-id="pref-thumbnailSize" />
    <radiogroup
      id="__addonRef__-thumbnailSize"
      preference="extensions.zotero.__addonRef__.thumbnailSize"
    >
      <hbox>
        <radio
          data-l10n-id="pref-thumbnailSizeSmall"
          value="small"
          selected="true"
        />
        <radio
          data-l10n-id="pref-thumbnailSizeMedium"
          value="medium"
          selected="false"
        />
        <radio
          data-l10n-id="pref-thumbnailSizeLarge"
          value="large"
          selected="false"
        />
      </hbox>
    </radiogroup>
    <caption data-l10n-id="pref-windowSizeOnViewImage" />
    <radiogroup
      id="__addonRef__-screenSizeViewer"
      preference="extensions.zotero.__addonRef__.windowSizeOnViewImage"
    >
      <hbox>
        <radio data-l10n-id="pref-maxScreen" value="max" selected="false" />
        <radio data-l10n-id="pref-fullScreen" value="full" selected="true" />
        <radio
          data-l10n-id="pref-originScreen"
          value="origin"
          selected="false"
        />
      </hbox>
    </radiogroup>
    <hbox width="100px">
      <caption data-l10n-id="pref-backgroundColorDialogImgViewer" />
      <html:input
        type="color"
        id="__addonRef__-backgroundColorViewer"
        preference="extensions.zotero.__addonRef__.backgroundColorDialogImgViewer"
        width="20px"
        value="#b90f0f"
      >
      </html:input>
      <button
        data-l10n-id="pref-restoreDefultColor"
        oncommand='const color=document.getElementById("__addonRef__-backgroundColorViewer");
      color.value="#b90f0f";'
      ></button>
    </hbox>
  </groupbox>
</vbox>
<separator class="groove" />

<!--关于-->
<groupbox>
  <label>
    <html:h4 data-l10n-id="pref-about"></html:h4>
  </label>
  <label
    data-l10n-id="pref-version"
    data-l10n-args='{"time": "__buildTime__","name": "__addonName__","version":"__buildVersion__","author":"__author__"}'
  >
  </label>
</groupbox>
